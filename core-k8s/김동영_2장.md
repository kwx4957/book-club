## 2장 

kubelet  
에이전트로 실행되는 바이너리 프로그램으로, 다양한 제어 루프를 통해 k8s API-server와 통신한다. 모든 노드에서 실행되며, 없다면 k8s 노드의 스케쥴링 및 클러스터의 일부로 취급되지 않는다. 파드의 생명주기 담당한다.

- kubelet의 호스트에 예약된 모든 파드는 어떤 파드가 어떤 노드에 예약되는지 감시하는 제어 루프를 통해 실행된다.
- api-server가 하트비트를 통해 kubelet이 정상인 것을 계속해서 확인한다. 
- 임시 스토리지나 네트워크 디바이스를 포함하는 파드에 대해 필요에 따라 가비지가 수집된다.

Service    
쿠버네티스가 정의한 API 객체이다. kube-proxy는 모든 노드에서 ClusterIP와 NodePort Service의 생성을 처리한다. 
- ClusterIP: 쿠버네티스 파드의 로드 밸런싱을 하는 내부 서비스
- NodePort: 다양한 파드의 로드 밸런싱을 하는 쿠버네티스 노드의 개방형 포트
- LB: 클러스터 외부에 로드 밸런서를 생성하는 외부 서비스

```
쿠버네티스는 다양한 제어 루프틑 가진 상태 조정 시스템
- 프로세스에 스토리지 바인딩
- 실행 중인 컨테이너 생성 및 개수의 확장
- 컨테이너가 정상적이지 않은 경우 해당 컨테이너 제거 및 마이그레이션
- 포트에 대한 IP 경로 생성
- 로드 밸런싱된 엔드포인트의 동적 업데이트 
```

API-Server  
k8s 클러스터를 위한 다양한 API 객체를 노출하는 HTTP 기반의 REST 서버이다. API 객체는 파드부터 노드까지 다양하게 있다. 
컨트롤 플레인의 모든 컴포넌트는 API 서버의 객체 변경을 모니터링하기 위한 모니터링 깅을 갖는 제어 루프를 갖는다.

kube-scheduler  
파드 스케쥴링을 담당. 파드 어피니티 및 테인트등, 하드웨어 구성요소(cpu, memory), 스케쥴링 제약사항을 고려한다.

인프라 컨트롤러  
db같이 상태를 갖는 앱은 특정 운영 요구사항을 갖는 경우가 있다. 이때 컨트롤러나 오퍼레이터가 앱을 관리하는 것이 필요하다. 
1. 사용자 정의 리소스 설치
2. 오퍼레이터 설치
3. 리소스실행